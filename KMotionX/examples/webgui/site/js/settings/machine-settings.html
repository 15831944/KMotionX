<div ng-controller="SettingsController" class="well">
  <!--
  <a ng-click="showMachine($event)">Show machine configuration</a>
  -->
  <div id="_settingstabs">

    <ul id=" " class="nav nav-tabs" data-tabs="_tabs">
        <li class="active"><a href="#_settings_general" data-toggle="tab">General</a></li>
        <li><a href="#_settings_mcodes" data-toggle="tab">M3-M9</a></li>
        <li><a href="#_settings_mcodes2" data-toggle="tab">M100-M119</a></li>
        <li><a href="#_settings_userbuttons" data-toggle="tab">User buttons</a></li>
        <li><a href="#_settings_motionparameter" data-toggle="tab">Motion Parameters</a></li>
        <li><a href="#_settings_import" data-toggle="tab">Import settings</a></li>
    </ul>
    <div class="tab-content">
      <div class="tab-pane active" id="_settings_general">
        <h3 class="settings-header">General machine settings</h3>
        <form class="form">
          <div class="row col-xs-12 col-sm-8 col-sm-offset-2">
            <div class="form-group">
              <label>Name</label>
              <input class="form-control" ng-model="machine.name" type="text" placeholder="Name your machine">
            </div>
            <div class="form-group">
              <label>Description</label>
              <input class="form-control" ng-model="machine.description" type="text" placeholder="Describe machine">
            </div>
            <div class="form-group">
              <label>Machine dimensions</label>
              <div class="row">                
                <div class="col-sm-4">
                  <div class="input-group">
                    <span class="input-group-addon">X</span>
                    <input class="form-control" ng-model="machine.dimX" type="number" min=0 placeholder="mm"/>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="input-group">
                    <span class="input-group-addon">Y</span>
                    <input class="form-control" ng-model='machine.dimY' type="number" min=0 placeholder="mm">
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="input-group">
                    <span class="input-group-addon">Z</span>
                    <input class="form-control" ng-model='machine.dimZ' type="number" min=0 placeholder="mm">
                  </div>
                </div>  
              </div>
            </div>
            <div class="form-group">
              <label>Bootstrap program and thread</label>
              <input class="form-control" ng-model='machine.initProgram' type="text" placeholder="Path to c program">
              <input class="form-control" ng-model='machine.initThread' type="number" min=1 max=7 placeholder="Thread number 1-7">
            </div>
          </div>
        </form>     
      </div>
      <div class="tab-pane" id="_settings_mcodes">
        <h3 class="settings-header">M-codes</h3>
        <div class="">
          <kmx-mcode-value 
            ng-repeat="action in machine.actions track by $index" 
            ng-if="action.action != -1">
          </kmx-mcode-value>
        </div>
      </div>
      <div class="tab-pane" id="_settings_mcodes2">
        <h3 class="settings-header">Extended M-codes</h3>
        <div class="">
          <kmx-mcode-value 
            ng-repeat="action in machine.extendedActions track by $index">
          </kmx-mcode-value>
        </div>
      </div>
      <div class="tab-pane" id="_settings_userbuttons">
        <h3 class="settings-header">User defined buttons</h3>
        <div class="">
          <kmx-mcode-value 
            ng-repeat="action in machine.userActions track by $index" 
            ng-init="userButton = true">
          </kmx-mcode-value>
        </div>
      </div>
      <div class="tab-pane" id="_settings_motionparameter">
        <h3 class="settings-header">Trajectory Planner / Axis Settings</h3>
        <div class="">
          <form class="form">
            <div class="form-inline well">
              <div class="form-group">
                <label for="breakangleInput">Break Angle</label>
                <p class="help-block">In degreees</p>
                <input id="breakangleInput" 
                  class="form-control" 
                  ng-model="machine.tplanner.breakangle" 
                  min="0" 
                  type="number" 
                  step="any" />
              </div>
              <div class="form-group">
                <label for="lookaheadInput">Look Ahead</label>
                <p class="help-block">In seconds</p>
                <input id="lookaheadInput" 
                  class="form-control" 
                  ng-model="machine.tplanner.lookahead" 
                  min="0" 
                  type="number" 
                  step="any" />
              </div>
              <div class="form-group">
                <label for="collineartoleranceInput">Collinear Tolerance</label>
                <p class="help-block">In inches</p>
                <input id="collineartoleranceInput" 
                  class="form-control" 
                  ng-model="machine.tplanner.collineartolerance" 
                  min="0" 
                  type="number" 
                  step="any" />
              </div>
              <div class="form-group">
                <label for="cornertoleranceInput">Corner Tolerance</label>
                <p class="help-block">In inches</p>
                <input id="cornertoleranceInput" 
                  class="form-control" 
                  ng-model="machine.tplanner.cornertolerance" 
                  min="0" 
                  type="number" 
                  step="any" />
              </div>
              <div class="form-group">
                <label for="facetangleInput">Facet Angle</label>
                <p class="help-block">In degrees</p>
                <input id="facetangleInput" 
                  class="form-control" 
                  ng-model="machine.tplanner.facetangle" 
                  min="0" 
                  type="number" 
                  step="any" />
              </div>                                    
            </div>
            <div class="well">
              <div class="form-group">
                <label>Jog speeds</label>
                <div class="row">                
                  <div class="col-sm-2" ng-repeat="axis in machine.axes track by $index">
                    <div class="input-group">
                      <span class="input-group-addon" ng-bind="axis.name"></span>
                      <input class="form-control" ng-model="axis.jogVel" min="0" type="number" step="any" />
                    </div>
                  </div>     
                </div>
              </div>
            </div>            
            <div class="well">
              <label>Axis parameters</label>
              <div class="form-group row">
                  <div class="col-sm-2">
                    <label>Axis</label>
                  </div>
                  <div class="col-sm-10">
                    <div class="col-sm-3">
                      <label>Counts Per Inch</label>
                      <p class="help-block">pulses/in</p>
                    </div>
                    <div class="col-sm-3">
                      <label>Max Velocity</label>
                      <p class="help-block">in/sec</p>
                    </div>
                    <div class="col-sm-3">
                      <label>Max Accel</label>
                      <p class="help-block">in/sec2</p>
                    </div>                    
                  </div>
              </div>
              <div class="form-group row" ng-repeat="axis in machine.axes track by $index">                    
                  <div class="col-sm-2">
                    <label ng-bind="axis.name"></label>
                  </div>
                  <div class="col-sm-10">
                    <div class="col-sm-3"><input class="form-control" ng-model="axis.countsPerUnit" min="0" type="number" step="any" /></div>
                    <div class="col-sm-3"><input class="form-control" ng-model="axis.maxVel" min="0" type="number" step="any" /></div>
                    <div class="col-sm-3"><input class="form-control" ng-model="axis.maxAccel" min="0" type="number" step="any" /></div>
                  </div>
              </div>
            </div>                                                                 
          </form>
        </div>
      </div>
      
      <div class="tab-pane" id="_settings_import">
        <h3 class="settings-header">Import settings</h3>
        <form class="form">
          <div class="row">
              <div class="col-xs-12 col-sm-8 col-sm-offset-2">
                <div class="form-group">
                  <label>Pdf import page number</label>
                  <input class="form-control" ng-model="transcoderSettings.pdf.page" min="1" type="number" step="any" />
                </div>
                <div class="form-group">
                  <label>SVG scale</label>
                  <input class="form-control" ng-model="transcoderSettings.svg.scale" min="0" type="number" step="any" />
                </div>
                <div class="form-group">
                  <label>SVG DPI</label>
                  <input class="form-control" ng-model="transcoderSettings.svg.dpi" min="1" type="number" step="any" />
                </div>
                <div class="form-group">
                  <label>Fractional digits (resolution)</label>
                  <input class="form-control" ng-model="transcoderSettings.svg.fractionalDigits" min="0" type="number" step="any" />
                </div>
                <div class="form-group">
                  <label>Init code</label>
                  <input class="form-control" ng-model="transcoderSettings.svg.initCode" type="text" />
                </div>
                <div class="form-group">
                  <label>Feed rate</label>
                  <input class="form-control" ng-model="transcoderSettings.svg.feedRate" min="1" type="number" step="any" />
                </div>
                <div class="checkbox">
                  <label>
                    <input type="checkbox" ng-model="transcoderSettings.svg.removeOutline"/> Remove outline (not complete)
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <input type="checkbox" ng-model="transcoderSettings.svg.removeDuplicates"/> Remove duplicates (not complete, might remove too much)
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <input type="checkbox" ng-model="transcoderSettings.svg.removeSingularites"/> Remove single points
                  </label>
                </div>
                <div class="checkbox">
                  <label>
                    <input type="checkbox" ng-model="transcoderSettings.svg.translateToOrigo"/> Move to origo
                  </label>
                </div>                                            
            </div>
          </div>
        </form>
      </div>
    </div> <!-- tabcontent-->
  </div>
  <div class="row">     
    <div class="col-xs-4 col-xs-offset-5">
      <button type="button" class='btn btn-default' >New machine</button>
      <button type="button" class="btn btn-primary" ng-click="saveMachine($event)">Save</button>
    </div>
    <div class="col-xs-2 col-xs-offset-7">
    </div>
  </div>
</div>
